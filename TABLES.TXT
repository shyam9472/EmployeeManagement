CREATE TABLE employee(
	EMP_ID int PRIMARY KEY AUTO_INCREMENT,
	EMP_NAME varchar(30) NOT NULL,
	EMP_SAL int NOT NULL,
	EMP_DEPT varchar(40) NOT NULL,
	EMP_EMAIL varchar(50) NOT NULL,
	EMP_CONTACT varchar(10) NOT NULL UNIQUE
);


CREATE TABLE login( 
	EMP_UNAME varchar(20), 
	PASSWORD varchar(20),
	EMP_ID int, 
	FOREIGN KEY (EMP_ID) REFERENCES employee(EMP_ID) ON DELETE CASCADE);


INSERT INTO employee(
	EMP_ID, EMP_NAME, EMP_SAL, EMP_DEPT, EMP_EMAIL, EMP_CONTACT
	) VALUES(1000,"Shyam", "20000", "Development", "shyam@abc.com", "9090909090");

INSERT INTO employee(
	EMP_NAME, EMP_SAL, EMP_DEPT, EMP_EMAIL, EMP_CONTACT
	) VALUES("Ashwin", "17000", "DEVELOPMENT", "ashwin@abc.com", "8090909012");


insert INTO login(EMP_UNAME, PASSWORD, EMP_ID) VALUES("ashwin@xyz.com", "1003ashwin", 1003);

SELECT EMP_DEPT
	 FROM 
	employee e
	INNER JOIN 
	login L
	ON
	e.EMP_ID=l.EMP_ID
	WHERE l.EMP_UNAME = ?;

CREATE TABLE ticket_details(
	TICK_ID int PRIMARY KEY AUTO_INCREMENT,
	RAISED_BY int NOT NULL,
	ISSUE varchar(100) NOT NULL,
	DEPT_CONC varchar(40) NOT NULL,
	STATUS varchar(30) NOT NULL,
	RESOLVED_BY int,
	FOREIGN KEY (RAISED_BY) REFERENCES employee(EMP_ID) ON DELETE CASCADE,
	FOREIGN KEY (RESOLVED_BY) REFERENCES employee(EMP_ID) ON DELETE CASCADE
)
